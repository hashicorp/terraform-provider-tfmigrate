---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "tfmigrate_stack_migration Resource - tfmigrate"
subcategory: ""
description: |-
  Defines a resource for migrating existing HCP Terraform workspaces to deployments within a non-VCS stack. Each workspace maps one-to-one with a stack deployment. The resource uploads configuration files to the stack and monitors the upload and deployment status.
---

# tfmigrate_stack_migration (Resource)

Defines a resource for migrating existing HCP Terraform workspaces to deployments within a non-VCS stack. Each workspace maps one-to-one with a stack deployment. The resource uploads configuration files to the stack and monitors the upload and deployment status.

## Example Usage

```terraform
resource "tfmigrate_stack_migration" "stack_migration" {
  config_file_dir      = "absolute/path/to/stack-config-directory"            # Provide absolute path to the directory containing stack config files
  organization         = "example-org"                                        # Replace with your TFE organization name under which the stack exists
  name                 = "example-stack"                                      # Replace with your TFE stack name, the must exist before migration and must be a non vcs stack
  project              = "example-project"                                    # Replace with your TFE project name under which the stack exists, we recommend creating a separate project for stack migrations other than the default project
  terraform_config_dir = "absolute/path/to/terraform-configuration-directory" # Provide absolute path to the directory containing terraform configuration files from which migration configuration is generated
  workspace_deployment_mapping = {                                            # Provide mapping of workspace names to deployment names, workspaces must exist before migration
    dev-workspace  = "dev-deployment"
    prod-workspace = "prod-deployment"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `config_file_dir` (String) The directory path containing configuration files. Must be an absolute path.
- `name` (String) The stack name. Must be unique within the organization and project, must be a non-VCS driven stack.
- `terraform_config_dir` (String) The directory path containing the Terraform configuration files from which stack configurations are generated. Must be an absolute path.
- `workspace_deployment_mapping` (Map of String) A map of workspace names to stack deployment names. This is used to map the workspaces to the stack deployments. The keys are the workspace names, and the values are the stack deployment names.

### Optional

- `organization` (String) The organization name to which the stack belongs. This must reference an existing organization. Either this attribute or the `TFE_ORGANIZATION` environment variable is required; if both are set, the attribute value takes precedence.
- `project` (String) The project name to which the stack belongs. This must reference an existing project. Either this attribute or the `TFE_PROJECT` environment variable is required; if both are set, the attribute value takes precedence.

### Read-Only

- `current_configuration_id` (String) The ID of the current stack configuration. This is used to track the current configuration of the stack.
- `current_configuration_status` (String) The status of the stack configuration. This is used to track the status of the stack configuration upload.
- `migration_hash` (String) The hash used for tracking the migration state of the stack.
- `source_bundle_hash` (String) The hash of the configuration files in the directory. This is used to detect changes in the stack configuration files.
- `terraform_config_hash` (String) The hash of the Terraform configuration files in the directory. This is used to detect changes in the Terraform configuration files.
